---

title: Input/Output


keywords: fastai
sidebar: home_sidebar

summary: "This module manages where downloaded data is stored via a config"
description: "This module manages where downloaded data is stored via a config"
nb_path: "00_io.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_io.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">planetarypy.ciss</span> <span class="kn">import</span> <span class="n">storage_root</span>
<span class="n">storage_root</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="PathManager">PathManager<a class="anchor-link" href="#PathManager"> </a></h2><blockquote><p>The <a href="/pyciss/io.html#PathManager"><code>PathManager</code></a> provides access to the paths in the archive, based on class attributes that reflect the processing level of the file:</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PathManager" class="doc_header"><code>class</code> <code>PathManager</code><a href="https://github.com/michaelaye/pyciss/tree/master/pyciss/io.py#L19" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PathManager</code>(<strong><code>img_id</code></strong>, <strong><code>savedir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

<pre><code>Manage paths to data in database.

`planetarypy.ciss.storage_root` determines the path to the database for ISS images.
With this class you can access the different kind of files in that folder conveniently.

Using the stored extensions dictionary, the attributes of the object listed here are created
dynamically at object initialization and when the image_id is being set.

NOTE
----
This class will use the archive path as designated by `planetarypy.ciss`, but
one can also call it with the savedir argument to override that.

Parameters
----------
img_id : str or pathlib.Path
    The N... or W... image identifier string of CISS images or the absolute
    path to an existing image
savedir : str or pathlib.Path
    Path to the pyciss image database. By default defined by what's given by
    `planetarypy.ciss.storage_root`, but can be overridden using this parameter.

Attributes
----------
basepath
img_id
calib_img
calib_label
raw_image
raw_cub
raw_label
cubepath
tif
undestriped</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="db_mapped_cubes" class="doc_header"><code>db_mapped_cubes</code><a href="https://github.com/michaelaye/pyciss/tree/master/pyciss/io.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>db_mapped_cubes</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="db_label_paths" class="doc_header"><code>db_label_paths</code><a href="https://github.com/michaelaye/pyciss/tree/master/pyciss/io.py#L147" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>db_label_paths</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">db_mapped_cubes</span><span class="p">())[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss/N1595341067/N1595341067_1.cal.dst.map.cub&#39;),
 Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss/N1625954542/N1625954542_1.cal.dst.map.cub&#39;),
 Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss/N1625962190/N1625962190_1.cal.dst.map.cub&#39;),
 Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss/N1591681327/N1591681327_1.cal.dst.map.cub&#39;),
 Path(&#39;/home/maye/big_drive/planetary_data/missions/cassini/iss/N1585780709/N1585780709_1.cal.dst.map.cub&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pm</span> <span class="o">=</span> <span class="n">PathManager</span><span class="p">(</span><span class="s2">&quot;N1875229393&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pm</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>cal_cub: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cal.cub
calib_img: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1_CALIB.IMG
calib_label: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1_CALIB.LBL
cubepath: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cal.dst.map.cub
dst_cub: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cal.dst.cub
raw_cub: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cub
raw_image: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.IMG
raw_label: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.LBL
tif: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cal.dst.map.tif
undestriped: /home/maye/big_drive/planetary_data/missions/cassini/iss/N1875229393/N1875229393_1.cal.map.cub</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pm</span><span class="o">.</span><span class="n">extensions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>OrderedDict([(&#39;cal_cub&#39;, &#39;.cal.cub&#39;),
             (&#39;calib_img&#39;, &#39;_CALIB.IMG&#39;),
             (&#39;calib_label&#39;, &#39;_CALIB.LBL&#39;),
             (&#39;cubepath&#39;, &#39;.cal.dst.map.cub&#39;),
             (&#39;dst_cub&#39;, &#39;.cal.dst.cub&#39;),
             (&#39;raw_cub&#39;, &#39;.cub&#39;),
             (&#39;raw_image&#39;, &#39;.IMG&#39;),
             (&#39;raw_label&#39;, &#39;.LBL&#39;),
             (&#39;tif&#39;, &#39;.cal.dst.map.tif&#39;),
             (&#39;undestriped&#39;, &#39;.cal.map.cub&#39;)])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">print_db_stats</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Print database stats.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        Table with the found data items per type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dbroot</span> <span class="o">=</span> <span class="n">storage_root</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database location: </span><span class="si">{</span><span class="n">dbroot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">n_ids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dbroot</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;[N,W]*&quot;</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of WACs and NACs in database: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_ids</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;These kind of data are in the database: (returning pd.DataFrame)&quot;</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">PathManager</span><span class="o">.</span><span class="n">extensions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dbroot</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;**/*_?&quot;</span> <span class="o">+</span> <span class="n">val</span><span class="p">)))]</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">print_db_stats</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Database location: /home/maye/big_drive/planetary_data/missions/cassini/iss
Number of WACs and NACs in database: 24
These kind of data are in the database: (returning pd.DataFrame)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cal_cub</th>
      <th>calib_img</th>
      <th>calib_label</th>
      <th>cubepath</th>
      <th>dst_cub</th>
      <th>raw_cub</th>
      <th>raw_image</th>
      <th>raw_label</th>
      <th>tif</th>
      <th>undestriped</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23</td>
      <td>3</td>
      <td>2</td>
      <td>23</td>
      <td>23</td>
      <td>23</td>
      <td>24</td>
      <td>24</td>
      <td>23</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DBManager" class="doc_header"><code>class</code> <code>DBManager</code><a href="https://github.com/michaelaye/pyciss/tree/master/pyciss/io.py#L151" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DBManager</code>()</p>
</blockquote>

<pre><code>Helper class for the whole archive.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filename_from_obsid" class="doc_header"><code>filename_from_obsid</code><a href="https://github.com/michaelaye/pyciss/tree/master/pyciss/io.py#L161" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filename_from_obsid</code>(<strong><code>obsid</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>

